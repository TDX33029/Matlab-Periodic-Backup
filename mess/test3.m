clear; clc; close all;

% ??????
basex = [-1000, -462, 0, 345, 1000, 0]; % X ??
basey = [200, 926, 1800, 1882, 1800, 200]; % Y ??
num_basestations = 6; % ????

% ????????????????
c = 1; % m/s

% ?????? y = ax + b
a = 1; % ??
b = 500; % ??

% ?? x ?????????????
x_vals = linspace(-1000, 1000, 50); % ?? 50 ??
y_vals = a * x_vals + b; % ?? y ??

% ?? TDOA ??
tdoa_data = zeros(length(x_vals), num_basestations - 1);

for i = 1:length(x_vals)
    target_x = x_vals(i);
    target_y = y_vals(i);
    
    % ???????????????
    dists = sqrt((basex - target_x).^2 + (basey - target_y).^2);
    
    % ???????1????
    r = dists(2:end) - dists(1);
    
    % ?? TDOA?????
    tdoa_data(i, :) = r / c;
end

% ??? CSV ??
csvwrite('TDOA_RES.csv',tdoa_data);

disp('TDOA data has been saved to TDOA_RES.csv');